Untertitelung des ZDF, 2020
Bis zum nächsten Mal.
Hallo, Chatge...
Oh, Moment.
Irgendwas stimmt hier nicht. Wartet mal.
Jetzt?
Hä?
Warum ist das heute so leise?
Warte mal, warte mal. Ich muss mal kurz
mein Headset abstöpseln und...
Also ich glaube nicht, dass ich bei euch leise bin,
Aber bei mir höre ich mich so leise an.
Ich muss mich mal kurz abstöpseln und noch mal das Headset neu dran machen.
Hier stimmt bei mir mit dem Kopfhörer irgendwas nicht.
So.
Ja, so ist es doch schon gleich viel besser.
Excellent.
Wie ist das?
Ex...
Hups.
Lasst euch nicht triggern von Team Sound.
Heute ist Weihnachten, heute ist Feiertag.
So, wir machen mal kurz die VM an.
Und wir machen schon mal...
Ne, erstmal mal Updates.
Dann wird rebootet.
Updates müssen sein.
Stream muss eingeschaltet werden.
Ja, gestern konnte ich nicht.
Gestern war Weihnachtsstelz angesagt.
Ich wollte eigentlich zwischendurch gestern auch mal kurz on kommen.
Ich glaube, ich habe ja gestern sogar den Streamtitel schon geändert.
Aber das habe ich nicht mehr auf die Reihe gekriegt.
Mal gucken, wie lange ich heute kann.
Aber es ist jetzt...
Jetzt erst mal unmittelbar steht jetzt nichts an.
Ich bin der Einzige, der on ist.
Tja, das stimmt.
Die anderen machen noch Weihnachtsstells mit der Family.
So.
Hast du was Gutes zu Weihnachten?
Eigentlich nur Standardzeug.
Von Socken bis
Hosen und Zeug.
Also,
jetzt nix.
außergewöhnliches.
Das ist auch schwierig. Ich meine,
wenn ich irgendwas haben will,
dann hole ich mir das. Das heißt,
dann müsste ja jemand anderes jetzt
eine Idee haben, die ich
nicht habe,
die ich aber brauche.
Das kommt eigentlich nicht vor.
So gut wie nicht. Deswegen gibt es Standardzeug.
Zum Beispiel Socken.
Ich zeige euch mal was, Chat.
Ich hab, ich hab ja gerade
Wartet mal kurz
Nicht das, ich hatte im Hintergrund
Ihr habt es nicht gehört, dass ich im Hintergrund Musik laufen hatte, oder?
Also ich meine jetzt nicht die
Nicht hier die Musik im Stream
Sondern hier im Hintergrund
Ich hatte nämlich noch mein Handy hier liegen, wo ich
Musik drauf an hatte
Ich hoffe, das hat man nicht gehört, dass es mich gleich morgens tost
Er sollte eigentlich nichts sein.
Gut, exzellent.
Gehen wir mal kurz hier rüber.
Updates.
Reboot.
Ne, noch nicht reboot.
Yes, update.
Yes, update.
Kein Update.
Auch gut.
Soll mir auch recht sein.
Ich hab eh keinen Bock drauf.
Update.
Oh, Kernel-Update.
Da muss er rebooted werden gleich.
Ja, wir hüben heute wieder ein bisschen Rust.
Letztes Mal sind wir nicht so wirklich weit gekommen.
Haben irgendwie fünf Zeilen Rust programmiert oder so.
Das war's.
Dafür viel drumherum gelernt.
Heute machen wir weiter.
Ich hab gestern Offstream tatsächlich mal eine Stunde oder so wie ich mich kenne wahrscheinlich
zwei bisschen rumgebastelt.
noch das heißt ganz so wenig ahnung von dem was wir heute machen habe ich nicht
zumindest was websockets angeht rest weiß ich auch nicht besser
oin kazzi tv nicht kazzi kaditz tv
so, Reboot.
Bam.
Und dann zeige ich euch mal was.
Ich habe nämlich, ich habe es ja auch gerade
auf Twitter gepostet.
Ich mache ja sonst nie Posts zum Thema KI
oder AI und sowas. Das habe ich auch nicht vor in Zukunft.
Ja, muss jetzt nicht irgendwie gleich mit den Leuten
losrachen. Ich finde,
die haben richtig, richtig,
es gibt so eine, so eine, so eine, so eine,
die Leute sind müde
zu viel AI-Kontent.
Was will es von mir?
Starship macht irgendwelche komischen Dinge.
Die Leute sind es müde, AI-Kontent
überall quasi
in
Arsch geblasen zu bekommen.
Kann ich auch verstehen. Geht mir auch
auf den Sack. Ich überspringe ja auch
Gitarre-Projekte, die
AI... Nervt mich.
Aber ich habe heute mal einen Post
gemacht, weil
ich habe gestern und heute
nicht Guus
habe ich GLM
4.7 ausprobiert
und zwar auf OpenCode
das zeige ich euch mal
weil das ist gerade kostenlos
und GLM 4.7 ist mit
Abstand das beste
kostenlose
Model
was ich bisher gesehen habe
also besser als alle Lokalen
die ich bisher laufen hatte
ich hatte nicht so viele lokal auf und muss irgendwas sein was in die grafikkarte passt ja
ich hatte glm 4.6 bei mir lokal laufen das hatte richtige probleme mit mit tool usage also da
konnte dann gar nicht fragen so hier was ist in diesem was passiert in diesem projekt konnte ich
fragen weil sie mich geschafft hat auf die files zuzugreifen wenn koder hat auch mit tools rum
gebackt war ganz brauchbar aber auch nicht so geil und was hatte ich denn sonst noch ich hatte
ein paar abwandlungen davon ich hatte ich hatte das ich hatte da ich hatte pt os es hat nicht
laufen das ist aber zu lahm ja und das ist gerade kostenlos bei open code deswegen installieren wir
mal Open Code. Habe ich auch erst gestern entdeckt. Hallo Frosty Grrrr. Guckt hier GitHub,
GitHub Projektstells. Wir installieren das jetzt einfach mal und mehr muss man nicht machen. Das
Das ist quasi so eine Cloud Code Abklatsch, nur Open Source.
Gibt ja schon ein paar andere Projekte auf GitHub.
Ich habe mich nämlich da die letzten Tage ein bisschen schlau gemacht, weil ich mir gedacht habe, ich will ein bisschen mehr AI in meinen Entwicklungsworkflow integrieren.
weil ich mache so oft irgendwelche chats auf um daran zu fragen wie kann ich in
rast das und das und das machen da wäre es auch viel praktischer wenn ich sagen
kann hier gucken meine main rs rein und sagt mir wie ich das und das und das
mache deswegen habe ich mal geguckt was es so gibt ja also es gibt beispielsweise
so was wie cloud code router da kann man cloud code tool verwenden allerdings mit
anderen models hintendran das wurstelt das um und es gibt sowas wie open code
was quasi ein nachbau ist und bisschen in der richtung nachbau aber beliebig
beliebige models erlaubt lokale models als auch cloud models und das coole daran
ist es ist aktuell bei denen bei open code ist glm 4.7 kostenlos du musst
einfach nur open code installieren und kannst das dann benutzen und das model
ist echt nice weil ich bisher gesehen habe wir machen das jetzt mal installiert
ist jetzt hier einfach macht sagt also wie man das natürlich so macht random
Sachen aus dem Internet runterladen und nach
Bash pipen. Also exakt
so, wie man es machen sollte.
Oh, der Download ist ja
richtig, richtig schnell.
Und dann machen wir weiter in unserem
Rust-Projekt.
Sarix, moin.
High-Speed-Download
hier. Warum ist das so lahm?
was machst du in rast üben web anwendung also back end back end und wir gucken
dann auch mal wir gucken nachher auch mal da kann ich mich nämlich noch
dunkel dran erinnern von früher wie man eine index html embedden kann in das
binary das war relativ einfach da gab es so einen so einen so einen so einen
makro und er hat dann alles quasi zur compile zeit eingelesen und in das
binary embedded dass das ganz nah ist das müssen wir nachher mal ausprobieren
Aber jetzt müssen wir erstmal AI-Stells installieren, dass ich euch was zeigen kann.
Ah ja, GLM ist glaube ich eine China-Model, falls da irgendeiner Probleme mit hat.
china chinesen am start sind während das ist auch installiert das denn so super
lahm die china chinesen schon drauf wahrscheinlich jetzt direkt beim
download oder seid ihr das chat der chat ist das bestimmt der chat ist schon drin
taiwan chinesen in china geht es ist eine gute frage aber ich glaube ich
glaube glm ist china chinesen aber ich bin mir nicht sicher
ok ich bin beruhigt hat jetzt immer noch auf zack schädlich schon drin
weil er was macht das denn da eigentlich gerade so lang seht das ist aber nicht
sondern ich vertrauenserweckend was was passiert gerade gut wir haben wir haben
einen snapshot ja wir haben uns snapshot ich ich mache noch mal einen snapshot
man weiß ja nie was man nachher wieder gewörten muss
was macht der da
weiß man nicht
äh
Ah, top.
Ach, der ist jetzt abgekackt wegen dem Snapshot.
Ganz ehrlich, seit ich Hyper-V verwende,
sackt es mal richtig massiv.
Ich muss kurz Pause machen,
vor allem mit der Stadt.
Seit ich Hyper-V unter der Haube verwende,
ist es einfach nur abfuck, die Virtualisierung hier.
Ich bin jetzt schon eine Weile kurz davor, das rückgängig zu machen und Hyper-V komplett auszuschalten, diese Windows-Sandbox-Sache auszuschalten.
Massive-Sack, ja.
Warum nimmst du freiwillig Windows? Ja, zum Beispiel wegen Anti-Cheat-Spielen.
So, jetzt gucken wir mal, was das da macht.
Open Code install.
Okay.
Der holt sich per se irgendwie einen Download.
Keine Ahnung, was die Leute treiben.
So, Open Code ist am Start.
Ein Ritzkoll.
Um Battlefield 6 nicht zu spielen.
Genau.
So sieht es aus.
So, wir haben Open Code installiert.
Jetzt zeige ich euch mal, dass es wirklich...
Ne, das ist nicht der Rust.
Alter.
The fuck?
Das hängt immer noch.
Was macht das denn?
Alter! Am Snapshot kann es ja mal liegen.
Was passiert hier?
Haben wir es jetzt? Hat es sich wieder beruhigt jetzt, ja?
Okay, ich glaube, das System hat sich wieder beruhigt.
Also, Repos.
Wo sind wir denn hier?
Rust Champ.
Hier ist unser Projekt drin.
Wir starten da jetzt mal Open Code drin.
Open Code kann man...
Also, was mich ja auch gleich bei dem Tool überzeugt hat, ist,
dass es ein richtig nices Command Line CLI hat.
Startet man hier drin.
Und gehen wir mal in Plan Mode.
sagen switch model glm 4.7 jetzt kann man sagen hier was das projekt
erbaut fragezeichen
er braucht ein bisschen das ist nicht das schnellste model ist nicht der
schnellste model aber es hat toolsupport das heißt es kann jetzt bei mir lokal
in dateien reingucken und sowas guck und jetzt hat er sich das angeguckt in
source code sagt das ist das simple rast web server project karl trost schämen bla bla bla
response hallo 123 also das ist das coole ist halt es ist gerade kostenlos lm 4.7 über open
code wem das per command line nicht so gefällt der kann auch open code web starten und jetzt
muss ich erstmal den Dark wieder...
Achso, ist schon.
So, es gibt auch
ein Webinterface, wo man hier einstellen
kann.
Hallo.
Hack.be
Ja, ja.
das geht zu zu open code und dann zu
weil nicht ich weiß nicht ob open code selbst haus wird wahrscheinlich nicht
die leiten das auch nur weiter aber glm ist zumindest überhaupt ein code karte
kostenlos finde ich finde ich nice läuft es über docker das model ist 203
gigabyte groß das kannst du nicht lokal laufen lassen
das ist cloud stellt du kannst aber auch lokale models verwenden ja also du
kannst hier jeden open kompatiblen links hinzufügen
das geht auch komplett lokal ja das geht komplett lokal guckt du kannst hier
open code lm studio oder kummer lama wobei ich da noch nichts gefunden was
wirklich gut findest.
Also ich hab
GLM 4.6
in der bisschen komprimierten
Version und Quencona 3
ausprobiert. Das ging nicht so gut.
Aber du kannst hier
kannst hier
Ulama, kannst in der Config
hinzufügen und lokal
benutzen. Wobei, wie gesagt, ich hab dann
nichts gefunden, was richtig gut damit funktioniert hat.
So, da machen wir
jetzt hier erstmal unser...
Ich schieb das mal kurz rüber.
Könntest du dann gleich nochmal fragen.
Jetzt machen wir das erste Mal
unsere IDE auf.
Wir gucken uns an, wo wir
stehen geblieben sind.
What?
jetzt das gelöscht vom letzten mal ja ich habe ja doch komplett gecleant
warten wir erst mal bis das aufgeht dann gucken wir mal wo stehen geblieben sind
wie gesagt ihr habt letztes mal nichts verpasst wir haben fünf zeilen was
programmiert oder so oder zehn zeilen und das war es das ist sehr übersichtlich
noch aber schon einiges gelernt
Ja, Projekt öffnen, please.
Übrigens, was ich auch ausprobiert habe die letzten Tage über, ist diese AI-Integration in den Chatbrains-IDEs.
Und da muss ich sagen, die ist echt Schrott.
Also der Chat hat permanent Formatierungsfehler.
Hier drinnen ruckelt die ganze IDE, wenn man das verwendet.
Also das hat mich überhaupt nicht überzeugt.
Zumal JetBrains dafür Geld will.
Ich habe ein paar Tokens in meinem All-Desktop-Package dabei.
Die wollen dafür Geld.
Also ich finde, das wirkt hakliger wie manche Visual Studio Code Extension,
als das, was die hier gebaut haben mit diesem AI-Chat.
Hier dieses Teil.
Also das...
Hier habe ich nicht mal das Plugin installiert auf der Kiste.
Also das war gar nichts.
Ja, ne?
Potato Wop, du hast das anscheinend auch schon probiert.
Richtig mies.
Also ich weiß gar nicht, was Chatbrains da geritten hat.
Normalerweise...
Moment, Font Size irgendwie.
Backt rum.
Eigentlich will ich Font Size.
Wo konnte man Font Size?
Font Size.
Font.
Hier.
20.
Hä? Warum hat es das jetzt nicht geupdatet?
Also manchmal
irritieren mich die...
die settings warum hat es jetzt die den editor nicht geupdatet jetzt okay man
muss noch mal neu starten ok dann passt
doch das alles was wir gemacht haben das letzte mal im prinzip haben wir eine web
das also das hier ist wurscht ja also im prinzip interessiert nur diese zeile und
diese paar zeilen hier was hier passiert ist aktuell
der startet auf localhost port 8080, einen TCP-Socket, dann registriert einen Web-Server,
wobei ein Web-Server startet erst hier unten, hier startet er einen TCP-Socket,
dann machen wir das mal runter, weil das gehört da thematisch eher dazu,
dann spawnt er einen Background-Thread, der einmal in der Sekunde irgendwas printet
und dann wartet und hier startet er den Webserver.
Und wenn man auf Slash geht,
Get Slash macht auf dem Webserver,
dann kriegt man Hallo123 als Antwort.
Das ist alles, was wir gemacht haben.
Ich kann euch das mal zeigen.
Wir haben hier Cargo Run.
Ach so, ich muss erst noch ins richtige Verzeichnis.
Cargo Run.
Und jetzt sagen wir hier Curl.
Oder sagen wir hier Lokal.
Curl Localhost 8080.
das ist alles mehr nur nicht gemacht dass ich habe überhaupt nichts verpasst
wissen was wir mal was wir ausprobieren können
ich bin mir gar nicht sicher
jetzt jetzt jetzt bin ich mal gespannt was gm 4.7 macht weil das läuft ja bei mir auf dem
host oder ist kein rast installiert jetzt bin ich mal gespannt was das macht wenn ich das wenn
ich das frage ob es was einbauen kann wir können ja mal wir können ja mal was ganz klose fragen
ich will eine zweite ich will eine zweite ich will ein post request annehmen und mit einem jason
drinne, jason posten und da dann printen, so was in der Richtung. Fragen wir es doch
mal. Ich will einen zweiten http-Händler hinzufügen, post jason, irgendwie titel
und dann den titel und nochmal guckt was ich da eben gesagt habe jetzt bin ich jetzt mal gespannt
direkt kaputt als
direkt kaputt war gar nichts mehr
hat keinen bock mehr moment ich bin ich bin ich im richtigen richtigen ordner drin
Okay, checkt er trotzdem nicht
Geil, top
Funktioniert ja richtig gut
Starten wir nochmal
Ah ne, hab ich jetzt
Jetzt, jetzt, jetzt hat er es gecheckt
Okay
Also, mal gucken
Was der bauen würde
Ich habe jetzt nicht vor, das wirklich zu benutzen.
Ich will nur mal kurz gucken, wie gut GLM 4.7 sowas recht einfaches hinkriegt.
Okay, er würde in meiner Cargo-Tommel, wird er Serde hinzufügen, Serde Jason.
Das macht schon mal Sinn, für Serialisieren und Deserialisieren von Jason.
Klingt schon mal nicht ganz so verkehrt.
Ich sag mal, kann das sein, dass das Ding abkackt, wenn ich das Fenster über Desktops verschiebe?
Ja, also GLM hat mir auch wirklich zugesagt die letzten zwei Tage.
Da viel mit rumgebastelt.
Und das ist zumindest das beste Model, was ich bisher ausprobiert habe, was kostenlos ist.
laut sachen und die lokalen sachen die lokalen sachen sind eh nicht so gut so
jetzt will er jetzt will er hier in main rs villa jason gedöns hinzufügen
das ist okay dann will er neue neue post händler hinzufügen gut request
String, PostHändler,
Payload. Ja, das sieht gut aus.
Also ich würde sagen,
das ist genau das, was wir gefragt haben.
Also das ist deutlich
besser als das, was
freies Chat-GPT hinwurstet oder so.
Wenn man da was
fragt. Zumal da
ist es ja auch schwierig mit auf
Projekte zu greifen. Da muss die Datei
auf der Seite hochladen.
also das ist im endeffekt genau das was wir haben wollen und das kann man echt gebrauchen
ich glaube nicht dass ki irgendwelche programmierer oder admin jobs ersetzen wird
ich meine ausnahmen wird es immer geben aber im kurs und ganzen sehe ich das nicht
aktuell ist es doch viel eher so dass es mehr arbeit gibt als die die erledigt werden kann
und ei macht die leute also die menschlichen leute einfach deutlich effektiver und du schaffst
mehr aber alleine das ist höchstens so was wo irgendwelche manager davon träumen
Also ich sehe das nicht, dass da massenhaft Leute entlassen werden wegen KI.
Wirklich nicht.
So, ich mache das mal wieder zu.
Können wir auch auflassen.
Ah doch, ich mache zu.
Ach, das bleibt auf, wenn man es schließt.
Achso, deswegen hat es rumgebackt.
Achso.
Guck, und jetzt geht Status.
Gucken wir mal.
Geht Diff.
Was hat es denn...
Also im Prinzip ist es gut, was das Ding gemacht hat.
Kann man so lassen.
Wir werden das natürlich nicht verwenden.
Schmeißen es jetzt gleich wieder weg.
Warum er hier oben irgendwas gemacht hat, check ich auch nicht so genau.
das war ich doch gar nicht zwar das model doch gar nicht egal
ist doch gut ja guck hier hat er eingefügt post händler aber mal ausprobieren ob das
funktioniert was was das model gebaut hat wir starten das jetzt mal gucken mal hago
run.
Jetzt machen wir dann curl.
Curl, localhost,
port 8080, slash.
Das für uns noch. Post.
Passiert nix.
X post.
Passiert auch nix.
Minus D ist es, glaube ich.
Wie sendet man
nochmal? Minus D?
War das so?
Jason in curl war das so
also
weg
achso
curl post Jason
man muss application
musste man application Jason wirklich
von Hand angeben
oder war das nicht
hat es das nicht automatisch gemacht
ok
das muss man
muss man wirklich nur machen.
Das habe ich richtig gemacht.
Minus D.
Guck.
Keck. Habt ihr das gesehen?
Das hat funktioniert. Also sprich, was das
Model hier gebaut hat.
Funzt.
Keck, keck, keck.
Das funzt.
So. Aber nachdem das
keine AI-Slob-Anwendung wird,
schmeißen wir das einfach wieder raus.
mehr hat das ding jetzt ja im endeffekt nicht gemacht das einzige was sonst noch
gemacht hat es hat hier noch sehr sehr jason und so reingeschmissen das ist nicht verkehrt
das lasse ich einfach mal weil ich gehe davon aus dass wir das nachher noch brauchen
du hast was cooles gefunden für heimautomatisierung zeigt mal was ist das
ein universal smart remote und batteries ach ja ich hab so ich hab so ein ding für
er kurz zu senden das muss aber per usb an strom so was per sikbi und wireless stelle
ich mir ganz praktisch vor das hält wahrscheinlich auch eine ganze weile
Das ist cool. Ich habe überhaupt keine Ahnung wofür ich brauche. Aber ich glaube das ist ganz
cool. Das kann man gebrauchen. Was kostet das Ding? Wo findet man das denn? Temperatur und
feuchtigkeits modul das ist was anderes 5 euro bei aliexpress zeigt mal her
der ali gucken was ist aber nacht hier dann auch da ist das zwingen hier sieht
die control da ist das teil 5 euro neukäufer sparen 15 euro
Oh Gott, diese AliExpress-Seite macht mich fertig.
Morgen KS.
Kann es nicht einfach das Angebot aufgehen?
Das ist immer schlimm.
35, das stimmt hinten und vorne nicht, was da steht.
AliExpress ist eine schlimme Seite.
Ich finde immer, wenn jemand, der die Seite nicht kennt,
die Seite zum ersten Mal aufmacht,
der denkt doch, das ist eine Scam-Seite.
Der wird doch da nie im Leben was kaufen.
Die sieht so krass nach Scam immer aus.
Guck mal hier.
Die China-Chinesen. Küchenschrank.
Und das ist halt kein Schrank.
Das ist jetzt schon ein Schrank,
aber das auf dem Vorschaubild war kein Schrank.
Amazon ist heftig schlechtes UI? Das kann man nicht sagen. Amazon ist vielleicht kein super krass fancy UI, aber ich finde bei Amazon merkt man, dass sie extrem auf Abläufe optimiert haben, die die Leute quasi beim Bestellen aus dem Bestellvorgang aussteigen lassen.
Ich finde das Merkmal extrem bei Amazon
Die haben alles drauf ausgelegt
Dass so unkompliziert
Wie möglich ist eine Bestellung durchzuklicken
So an allen Stellen
Wo was unklar ist oder man aussteigen könnte
Haben sie optimiert
Also ich finde das Merkmal ziemlich bei Amazon
Ansonsten finde ich Amazon
Seid jetzt nicht super hübsch oder so
Die ist jetzt zweckmäßig
Und sicherlich kein super fancy Design
aber man merkt das bei amazon was dahinter steckt
weil ich heute weil ich zu weihnachten ganz viel nested klammern will je mehr
nested klammern umso besser wird bestimmt auch schlimm klein aber ich würde sagen wir fangen
mal an und zwar mit was fangen wir an und zwar mit websocket da habe ich mir im vorfeld aber
schon ein bisschen was angeguckt. Weil wie gesagt,
aktuell macht die Anwendung noch nichts.
Außer einen Background-Thread
starten, der einmal in der Sekunde
was printet und dann eine Sekunde
sleept. Und ein
Webserver auf Port 8080.
Und wenn man dort nach Slash geht,
kommt hier Hallo123 zurück. Das ist alles.
Rust
ist, also Rust ist sehr
schwer durchdringbar,
nenne ich das jetzt mal. Also,
das sieht teilweise obfuscated
aus. So viele Sonderzeichen,
hier irgendwelche Lifetime-Annotations
und hast du nicht gesehen?
Das ist schon schlimm.
Und was ich jetzt gestern auch gemerkt habe,
ich habe gestern ein bisschen rumgebastelt noch,
Rust,
selbst wenn du dir super
Mühe gibst,
das schön zu machen,
das geht bei Rust
nicht immer. Und Rust
ist halt auch super Five-Hat,
wo du dir immer Gedanken machen musst,
wegen
äh, Clone hinten
dran und dahin
casten und da ist eine Referenz
und da geht's out of scope und hier
und da. Also, Rust
hat seine Anwendungsgebiete, da bleib ich auch
dabei, das hat mir ja gestern sogar einer auf Twitter
geschrieben, da bleib ich auch bei.
Rust hat seine Anwendungsgebiete,
aber Rust ist wahrscheinlich nicht die beste
Sprache so für
General, also
für so allgemein zu
benutzen. Also, wenn man jetzt sagt, ey, ich will mal was
ausprobieren, ich hatte da eine coole Idee,
dann zu sagen, ich mach das jetzt in Rust, ist wahrscheinlich andere Sprachen besser dafür geeignet,
weil Rust brauchst halt einfach doppelt so lange wie bei anderen Sprachen was hinzuwurschteln.
Dafür hat es zumindest den Vorteil, dass das was da steht, so Memory Safe wie möglich ist,
wie du das Compile Time checken kannst, im Vergleich zu anderen Sprachen.
Also Performance und Memory Safety ist halt der große Vorteil von Rust.
Und dort wo man es braucht, also zum Beispiel jetzt, wo ich es mir super vorstellen kann, ist zum Beispiel, wenn Teile von einem Browser in Rust entwickelt werden.
Das kann ich verstehen, das muss sau schnell sein und das muss so memory safe wie möglich sein, dafür ist Rust gut.
Wenn jetzt einer eine 0.8.15 interne CLI Anwendung basteln will, dann ist er wahrscheinlich in Go besser dran.
Selbst für Embedded ist Rust nicht so nice, weil es da gefühlt alles nur gibt für C
oder C++.
Probier mal in ESP32 in Rust zu programmieren.
Ich weiß, dass es da ein Projekt für gibt, aber du kommst wahrscheinlich ziemlich schnell
an die Grenzen, zumal die offiziellen Beispiele und Libraries halt auch alle in C sind.
War für Linux doch auch interessant.
Da bin ich mal gespannt.
wie das wird also prinzipiell ist es natürlich genau richtig für linux weil
soll schnell sein und so memory safe wie möglich also macht er schon macht ja
schon sinn
da bin ich aber mal gespannt wie sich die zukunft entwickelt weil in linux
gibt es ja gibt es ja aktuell immer wieder streitereien zwischen den zwischen
den Rust Fanboys und den C Fanboys. Linus ist da allerdings unerwartet neutral sag ich
mal. Ich hätte jetzt eigentlich gedacht er flamed öfters mal die Rust Leute. Macht er
aber gar nicht. Sondern eher die C Leute die die Rust Leute nerven. Aber wir machen mal
Also wir versuchen jetzt mal einen Websocket-Server zu starten mit Rust.
Wir können das übrigens gerade noch ein bisschen, wir werden das nochmal ein bisschen, by the way, warum ist denn das hier, achso, habe ich jetzt den Mikrofon vergessen.
Ups.
Wir werden das mal ein bisschen ordentlicher machen und zwar verschieben wir mal die Datei, äh, die, das ist keine Klasse, das Struct, verschieben wir mal eine extra Datei.
Wie macht man das jetzt am besten?
Gibt es keine?
Refactor
Move
nach
config.rs
Was will er jetzt von mir?
Hä?
Ach so!
Oh!
Oh, der will mir sagen, die greifen da drauf zu. Ja gut, ist kein Problem. Kann man trotzdem verschieben. Hast du das Rust Microsoft AI Treiber vor dem Partner? Ja, habe ich mitbekommen. Okay, ich werde es mal kurz versuchen zusammenzufassen für die Leute, die es nicht mitbekommen haben.
Irgendein Typ von Microsoft hat geschrieben, sein Ziel ist es, jegliche C und C++-Codezeilen bei Microsoft zu eliminieren und auf Rust umzustellen.
Da hatte ich mal so ins Blaue rein vermutet im Stream vor ein paar Tagen.
Das ist so eine typische Position für eine Beförderung und sobald er befördert ist, interessiert es danach keinen mehr.
So, und jetzt kam raus, dass das Microsoft nicht so gut gefallen hat, dass der öffentlich quasi die Vermutung oder die Gerüchteküche geschürt hat, dass Windows in Rust umgebaut wird.
Und jetzt hat er nochmal gepostet und klargestellt, Windows wird nicht in Rust umgestellt, sondern der Typ arbeitet nur bei einem Research-Projekt, wie man am besten die Sachen bei Microsoft in Zukunft auf Rust umstellen kann.
AF-Programmer, stimmt das so ungefähr, was ich hier zusammengefasst habe?
Und das hat Microsoft zumindest nicht gefallen, dass Gerüchte da aufgekommen sind.
das war eher so ein typischer linkedin linkedin selbstbeweihräucherungs post
so ach ja jetzt haben wir die jetzt haben wir die datei verschoben da müssen wir jetzt ja
noch hier hingehen und vor die ganzen fällen pop schreiben dass man darauf zugreifen kann
und schon funktioniert wieder okay aber ich weiß nicht ist wie er war das letztens im stream der
gesagt hat sein rast herz blutet als er meine lokale variablen hier gesehen hat weiß gar
nicht wer der tommy war das tommy car oder irgendwie ist glaube ich war das ist er da
falls der da ist, kannst dich freuen, wir machen keine globalen Variablen mehr, okay? Wir machen
das jetzt irgendwie anders. Weil ich habe es mir hier einfach gemacht, static lifetime upconfig,
das machen wir neu. Ich weiß noch nicht genau wie, aber doch, ich weiß wie, weil ich schon
ausprobiert habe. Plötzchen, natürlich weiß ich wie. Und zwar habe ich gesehen, dass Axum,
dass unser web framework so eine art dependency injection unterstützt zeige ich euch jetzt mal
ich sag mal so eine art so richtig so richtig schön wie in wie in java oder das ist das nicht
aber man kann jetzt zum beispiel einstruckt machen also das hier kann man wieder löschen
klein gleich kann gleich fort das ist natürlich jetzt an allen stellen wo wir es verwenden ist
ist jetzt kaputt aber das werden wir jetzt fixen. 9 Odulmet 3 Odulmet. Das klingt wie eine Zahnbürste.
Ist das nicht eine Zahnbürste? Oder Mundspülung oder sowas?
Ja Zahnpasta ist das. Zahnpasta.
Waren wir hier ein Strukt und das nennen wir Upstate. So. Ich habe das zwar gestern ausprobiert,
aber ich bin mir nicht ganz sicher, wie ich das gemacht habe. Ah ja, genau, ich weiß es wieder.
Ich weiß es wieder. Upstate, da packen wir jetzt hier das mit der Git-Version, packen wir da rein,
weil das ist dann nämlich viel besser auf oder keine ahnung wir haben später noch mehr upstate
als die als die config was ist denn hier los danke schön für die subs zehn stück das ist ja
massive subscription hier danke huge weihnachtsgift weihnachtsgift vor allem wir hatten was gekriegt
wir hatten was gekriegt trace das gekriegt der angry muss man das kriegt der max flint avia
mark sg terror keks der darauf dass am start kettung anbootet physics also lauren es der
war auch schon lange nicht mehr da. Excellent. Hacker-Mans im Chat hier. Also, wir machen jetzt
den App-State, da packen wir unsere App-Config rein. Oh, habt ihr hier SF-AI? Warte mal, App-State,
Wir sind in Rust. So rum.
Und nun
legen wir sowas hier.
Ich hoffe, ich krieg das
jetzt richtig im Kopf hin.
Let
AppState gleich
AppState
Konfig
Ah, Mist.
misst jetzt habe ich verkackt jetzt heißt wir bauen eine web anwendung in rast jetzt habe ich
verkackt ich muss gerade mal die wörter ich habe diesen kampf ja gelöscht gerade braucht es noch
mal kurz. Oh ne, nein! Jetzt kann er immer rückgängig machen, shit! Moment, Moment, History,
History, Local, Local History. Äh, das ist die Git History? Das wollte ich ja eigentlich nicht. Ich
wollte die local history local history history wollte ich haben
und wie hieß das denn noch mal das hiezo file history das haben die haben
noch das habe ich gesucht genau change da kann man nämlich hier rückgängig
machen oder einfach drauf scheißen und das nochmal neu machen.
Nur zum Üben, genau.
Nur zum Üben.
Okay, ähm
Da war das nochmal rückgängig
Also, fangen wir mal an
Wir machen ein
Struct
AppState
In dieses
Struct
kommt
die App-Config rein.
Da kommt später noch mehr rein.
Deswegen nesten wir das da drinnen.
So, und jetzt kommt
Rust-Stells.
Hab ich mir gestern angeguckt, wie das funzt.
Und zwar, ich hätte jetzt gerne auf
App-State eine Methode
so nach dem Motto
Create oder sowas.
Oder New.
Oder
nennen wir es Create.
irgendwie so in der Richtung.
Und wo ich das dann,
wo ich diesen Krempel hier reinpacke. Und ich habe jetzt
gelernt, in Rust macht man das so.
Da muss man sagen, Impel
AppState. Und da kann man
dann sowas hier drinnen machen wie
hier PubFn.
Wobei Pub brauchen wir hier drinnen nicht.
Fn.
Ja, so
sowas in der
in der Richtung.
Kann man da machen. Aber Config brauchen wir
nicht und da bin ich denn ich nenne es mal anders ich nenne es hier einfach mal
hier create state wobei muss man das überhaupt an die app konfig packen muss
man überhaupt nicht nehmen lassen das einfach das nennen wir einfach so hier
create state da zurück geben wir einen app state weiß ich ob wir das annotate
müssen oder nicht jetzt können wir uns diesen ganzen kram mit mit logs und so
was sparen das und ich brauche keine globalen variablen mehr da muss mich der chat nicht
mehr flamen also das kann man im prinzip brauche ich nur das hier noch konflikt geht version setzen
passt und jetzt setzen wir sagen wir return app state config das war's da haben wir es wobei wir
können sogar noch abkürzen wohin schreiben das finde ich in rast auch ein bisschen cringe nicht
wirklich ein bisschen
gewöhnungsbedürftig, dass man entweder
schreiben darf, return
bla bla bla und dann so ein Ausdruck dahinter kommt
oder man lässt das return weg
und das Semikolon weg und dann
ergänzt er das automatisch um den return
für das. Also das ist echt ein bisschen kompliziert.
Einfach, weil es mich
interessiert.
Ich habe nichts Großartiges damit vor.
Also zumindest jetzt noch nicht.
Okay, ich würde
übrigens auch sagen,
Wir packen Git-Version, machen wir nicht in die Config rein,
weil die Config-Klasse benutze ich ja auch, um Command-Line-Argumente, Environment-Variable und sowas zu parsen.
Deswegen packen wir das hier rein in die...
auch schon mal probt machen alles verschieben wir dann gleich habe ich das hier in den app
state rein weil das ist ja nicht für command line parsing zu so hier einfach nur noch am ende geht
version ich warte auf den c++ tag wieso haben wir doch schon öfters gemacht haben doch schon
schon C++ gemacht.
Schon mehr als Melipes haben wir C++ gemacht
im Stream.
Verdienen sogar mal ein Geld
zum nicht unerheblichen Teil
mittlerweile mit Kubernetes.
Kubernetes!
Wie es die ganz geilen Leute sagen.
Du wolltest Weihnachten das Video scheinen?
Du meinst das C++ Flame Video
wollte ich an Weihnachten schauen?
Ja.
Ja, morgen ist ja auch noch Weihnachten.
Oder vielleicht, wenn ich keinen Bock mehr auf Rust
hab, dann gucken wir uns vielleicht noch irgendwie eine Viertelstunde
davon an.
So.
Create App State.
So, was ich jetzt
machen kann ist, ich kann diesen ganzen Krempel
hier packen.
Das hab ich gestern
schon mal gemacht. Also, deswegen
weiß ich so ungefähr, was ich machen muss.
So, jetzt
erstellen wir hier eine Variable state.
Und zwar
hier create state
Alter, ich kann ja nicht schreiben.
Create state.
So, und jetzt können wir diesen ganzen Krempel hier
erstmal ersetzen durch
state config
s-value
dass es dann wieder schöner ist.
s-value
Intervall
guck jetzt jetzt kaputt jetzt aber was habe ich was habe ich falsch gemacht
leute was ist hier wieder so ein blog mit outlift current function in boros
date config which is owned from es ist ja okay jetzt ist das ist das ist was
magic das ist was magic jetzt müsst ihr zu
müssen mal gucken an welcher stelle der da seine probleme hat ich weiß woran es
liegt ist ja klar ist ja klar der thread hier der kann ja länger laufen als diese
methode läuft und sobald diese methode beendet ist wird appstate gelöscht ja
logisch deswegen deswegen jetzt kommt was logik deswegen muss ich das in einen ark verpacken ein
ark ist ein atomic reference counter also ist 5 hat was logik also da musste da muss man also da
reicht da reicht pfeiffert eigentlich nicht eigentlich muss man dafür six hat sein so muss
man dafür sein also so musst du vielleicht für andere programmier sprachen sein aber
fast muss man sowas so sein dein kopf braucht mehr gehirn als rest best kopf wobei ist das
nicht normal dass vom kopf jeder größteil gehirn ist aber was wir hoffen so als muss
man das nämlich in einen Arc verpacken, der dann guckt, dass dieses Objekt hier quasi
länger lebt.
Okay, ich muss das anders erzählen.
Ich mache jetzt erstmal, dass der Compiler-Fehler weggeht, dann erkläre ich das, soweit ich
das erklären kann, was Rust angeht.
so ich muss ihm jetzt sagen ich will nicht state config haben sondern ich will state config klonen
es value geht nicht also will ich ja nicht wieder konflikt es wird immer noch nicht warum
war es jetzt schon wieder jetzt jetzt bin ich jetzt bin ich verwirrt was hat
er jetzt für schmerzen
But it's
Sparrow's Day, which...
Ja, aber ich...
Deswegen hab ich's doch gekl...
Ach so! Ah!
Moment! Moment!
Ich muss das vorher
ja klonen. Ich kann das nicht einfach
hier drinnen klonen. Okay. Okay.
Ich weiß, woran's liegt. Ich weiß, woran's liegt.
Ich fix das jetzt und dann versuch ich's zu erklären.
hier mama background update das heißt gestern also gemacht und dann packen war
das da rein
hier kriegen wir
irgendwas mit mit state oder so das müssen wir hier rein packen
und jetzt starten wir das hier background update state clown jetzt sollte es funktionieren
Shit, immer noch nicht. Warum?
Ach so, ah, das muss Async sein.
Es funzt.
Okay, jetzt kann ich das mal versuchen zu erklären, was Rust für Schmerzen hat.
Also, hier lege ich eine Variable State an.
Das war ja eben sowas hier.
Create State, kommt zurück, ein AppStateStruct.
So, in Rust ist es jetzt so.
Wenn ich diese State-Variable irgendwo als Parameter in eine Funktion verwende, dann wird das gemovt.
Das heißt, diese Funktion hier, die in Rust-Net-Methods, die ownt das dann.
Also der gehört, der Inhalt von, das ist dann nicht mal in dieser Variable, das wird quasi aus der Variable raus, hier rein gemovt.
Und dann ownt das diese Funktion.
Das Problem ist jetzt nur, wenn das hier noch da ist, nachdem es gemovt wurde, dann funktioniert das nicht mehr.
Ich glaube, die Erklärung ist voll für den Arsch, oder?
Alter, Rust ist Six Head Time.
Da explodiert dein Kopf bei.
Oder was hier auch sein könnte, wenn ich eine Reffel...
Mal angenommen, wir würden es jetzt so machen.
mal angenommen ich sage jetzt okay ich habe hier eine variable state und ich übergebe an
meinen background background thread übergebe ich jetzt im pointer auf diese variablen referenz auf
diese variable dann kann es ja sein dass dieser thread hier länger läuft als dieser scope hier
gültig ist ich glaube so ist besser wenn ich so wenn ich so erkläre das heißt hier der thread
läuft noch, das hier ist fertig,
geht hier out of scope, State wird
gelöscht, Background Update
hätte aber noch einen Verweis
hier drauf
und würde letztendlich dann auf
undefined Zeugs
zeigen. Das ist das, was in C++
beispielsweise recht oft passiert.
So, und Rust beugt da Sache
vor und Rust sagt dann, nee, nee, nee, nee, nee,
so geht das nicht.
Du musst sicherstellen,
dass die Referenz so lange
gültig ist, wie das hier läuft.
Und das kann man mit einem Arc machen.
Das ist ein Atomic Reference Counter.
Und jetzt ist es so, dass diese AppState Instanz von diesem Struct,
die hängt jetzt nicht direkt an dieser Variable dran,
sondern die wird quasi, das Ownership heißt das bei Rust,
wird an den Arc, an den Atomic Reference Counter übergeben.
Das heißt, dem Arc gehört jetzt dieses AppState Objekt.
Das heißt, in der Variable ist jetzt auch kein AppState mehr, sondern ein Arc AppState.
Und der Arc sorgt dafür, der hat einen Reference Counter drin.
Erst wenn der Reference Counter auf 0 fällt, dann darf er den AppState löschen.
So, und jetzt kann ich sagen, State.Clone, das ist ein bisschen unglücklich benannt.
Es könnte vielleicht count oder add oder irgendwie sowas heißen.
State.clone cloned jetzt nicht etwa mein Upstate Struct, sondern erhöht den Reference Count von diesem Arc um 1.
Und dementsprechend, bis der Reference Count nicht auf 0 ist, kann Create State nicht gelöscht werden.
Ich glaube, da steht okay, wenn man über Clone drüber geht.
This creates another pointer to the same allocation, increasing the strong Reference Count.
Genau. So, und Arc muss es sein, Atomic Reference Count muss es sein, damit das ganze Thread safe ist. Und jetzt weiß Rust, okay, wenn das hier out of scope geht, aber der Reference Counter noch nicht auf 0 ist, dann wird das nicht gelöscht.
der reference counter also hier geht hier wird der reference counter um 1 hochgezählt so das
jetzt auf 1 das geht hier auch noch scope dann wäre er null aber hier wurde er auch noch mal
hochgezählt das heißt hier ist dass der reference counter auf 2 das heißt hier geht er auch noch
stoppt dass der reference counter wieder 1 und erst wenn das hier oben fertig ist und auch
autoskop geht dann fällt der reference counter auf null und create dies der state wird gelöscht
das ist unter anderem die sachen warum rast so eine feil fett sprache ist und man den rast auch
so lahm ist was zu programmieren weil du dich mit solchen dingen beschäftigen muss und so erreicht
rast halt das was man haben will dass es so memory möglich so so memory safe wie möglich ist mit
reinen compile time checks runtime checks gibt es auch noch ja aber das größte an den compile
time checks runtime check zum beispiel so ray bounce und sowas das muss ja schon noch überprüfen
aber so erreicht was das so memory möglich ist
zur compile zeit und dementsprechend so viel performance wie möglich hat dann runtime zur
zur Laufzeit.
Und es halt auch
kein automatisches
Memory Management mit irgendeinem Garbage
Collector braucht. Weil immer
ganz genau nachvollziehbar ist,
welche Lifetime diese Objekte haben
und wann die out of scope
gehen, aufgelöscht
werden können.
Es ist halt wirklich extrem
durch die Brust ins Auge teilweise,
bis da durchbiegt. Und es wird noch viel schlimmer.
Das wird noch viel schlimmer, wenn
später noch Lifetime Annotations
und sowas dazu kommen. Also,
du kannst auch wirklich ordentliches
Rust teilweise nicht lesen.
Sonst einfach nicht.
Also, Rust ist sehr schwer
durchdringbar.
Das hier ist jetzt ja noch easy, das ist ja auch kein Ding.
So, weiter geht's.
Websockets. Also, wir haben jetzt hier
ein AppState.
da ist meine konflikt drin und so die brauche ich jetzt aber in dem websocket websocket geschichte
noch gar nicht okay dann versuchen wir uns mal an websockets wie gesagt websockets habe ich gestern
auch schon mal ausprobiert aber ich habe es mir nicht aufgeschrieben also keine ahnung ich weiß
so ungefähr ungefähr wie es funktioniert wollen wir mal die ki fragen fragen wir
fragen wir mal gucken mal gucken hups habe ich jetzt habe ich zu viel zu viel verschoben wir
fragen fragen wir die ki was sie sagen wird aber nicht bild nur plan nur plan please
mal gucken ob die deutsch kann würde ich websocket ich will einen websocket endpoint
bereitstellen unter slash vs der alle sekunde eine nachricht an den connecteten
einschickt.
Mal gucken, was...
Also wenn wir das mal richtig schreiben können, mal gucken, was
die AI da draußen machen würde.
Werde zuerst den aktuellen Code
untersuchen. Ja, dann mach mal.
Was ist das?
Code Gen Unit 16.
Was macht das?
bisschen bisschen info um pein mit 16 prog wie was ist die fault wie viele
threats mit wieviel threats kommt halt ist die fault frage vor der
implementierung welche nachricht soll jede sekunde gesendet werden
den text keckel einmal die sekunde senden mit einem ach ja okay das ist
tatsächlich nicht schlecht
hotgen units 16 ich meine die compile zeit ist ja aktuell noch relativ schnell
Fett?
Okay, okay, das ist ja auch eine geile
Beschreibung, äh
16 Codecards, perform
Fett, LTO across crates
Obviously, was damit gemeint ist, oder?
Also echt kack, wer das nicht versteht
LTO, Fett, perform
Fett
LTO across crates
Alles klar.
Jetzt wirst du mal Bescheid.
Fett LTO.
So.
Also.
Händler Funktion WS Händler erstellen.
Route hinzufügen.
Naja, das ist jetzt
vielleicht ein bisschen
Wir gucken mal.
Axum WebSockets.
Hier, so ging das. Genau.
Moment, hier haben sie auch ein Example für WebSockets
gehabt. Das Example ist
super plote. Das hat mich gestern auch total
verwirrt. Du brauchst eigentlich nur drei Zeilen.
Also, was wir brauchen, ist folgendes.
Ähm.
MonkaS.
Was wir brauchen, ist folgendes.
hier any route ws händler das brauchen wir damit unter slash ws was zur verfügung steht
jetzt müssen unsere cargo datei müssen noch feature bei axum feature ws hinzufügen kann
das die idee dass man sagt die irgendwelche machen machen wir machen wir features füge
mir features hinzu. Na gut, schauen wir mal. WS-Händler brauchen wir jetzt noch. Function
Essig. So, und das ganze Gelaber hier unten, das brauchen wir eigentlich gar nicht, was
der hier noch macht.
Probieren wir uns.
So, das kommt alles...
Was?
Oh.
Ähm.
So, das brauchen wir alles. Brauchen wir alles nicht hier.
Brauchen wir alles nicht. Im Prinzip brauchen wir
nur das hier.
Upgrade. So, jetzt müssen wir erst noch sagen,
dass Axum WebSocket
Support braucht.
Kann man der IDE irgendwie sagen,
dass wir hier features hinzufügen wollen oder muss ich das jetzt copy pasten
ich hab doch ich habe schon was eingefügt von dem feature features vs hinzugefügt
muss das erste mal neu kompilieren und dann haben wir mit bissel glück
import websocket upgrade user agent type header das brauchen wir nicht connect info brauchen wir
auch nicht eigentlich nur das und das jetzt müssen wir sagen wie es on upgrade ach nee
Moment, wo kriegt man denn den...
Moment, nee, brauchen wir gar nicht.
Einfach Upgrade?
Moment, wo kriegt denn der Socket her?
Hier an der Stelle? Socket?
Kommt denn das her?
Ah, hier. Connect.
Connect-Info.
Da kommt das.
Da kommt das her.
Ach ne, Moment.
Das ist der Argument,
den OnUpgrade da reingibt.
Ach, jetzt verstehe ich das.
Das ist ja hier Lambda-Syntax
bei InRust.
Gut, das heißt, wir brauchen jetzt noch
eine Funktion, die sich
HandleSocket nennt.
So, dann müssen wir mal gucken,
was die für eine Signatur
braucht.
Das ist jetzt
total bloat dieses Beispiel.
Brauchen wir alles nicht.
Das brauchen wir auch nicht.
So.
Und wenn ich jetzt alles richtig gemacht
habe.
Wenn ich jetzt alles richtig gemacht habe, dann kann ich sagen, Loop, Tokyo, Sleep, wie ging das nochmal, Tokyo Time, Sleep, für eine Sekunde.
und einmal in der Sekunde
sagen wir Socket Send
oder was war das Socket? Doch Send
war es, ne? Send.
Da muss ich
jetzt gucken, wie das funktioniert. Send
Message. Irgendwie so
Text. Message Text.
Genau. Das wollen wir machen.
Und das senden wir jetzt einmal pro
Sekunde. Senden wir
Message. Kommt das her?
Importieren.
Websockets. Das senden wir jetzt. Keck W einmal in der Sekunde. Was hat er jetzt für Schmerzen?
Unused. Ach müssen wir das noch evaden? Evade. Unwrap. Und zum ausprobieren, was mag er hier
nicht format called without parameters okay w1 wenn das jetzt funst was hier gebaut habe dann
wenn ich das starte dann kriege ich jetzt ein websocket service websocket localhost port 8080
slash vs connect ich mich jetzt hin und müsste einmal in der sekunde keck w1 als message per
Websocket bekommen. KQ1.
Einmal die Sekunde. Funst.
Websocket-Server am Start.
Funst. Gut.
Excellent.
Ein Websocket-Server.
So. Das habe ich gestern schon
ausprobiert. Also wir sagen
ich keinen plan mehr was ich jetzt machen will ist aus dem background thread aus dem hier eine
nachricht an den websocket schicken ich mache das jetzt erst mal so wie ich das in c sharp
oder java machen würde nur mit dem unterschied dass ich keine ahnung habe ich das gegengestück
in rust machen würde also ich versuche mal ich versuche mal okay
das kommt schon also ich brauche so eine art message event bus oder sowas also
ich will ich will im endeffekt hier so was machen was die event hab ich und
hier unten will ich dann so was machen wie event oder event get event get und
dann das in den zocker schreiben so was in der richtung ist die frage wie mache
ich das wie mache ich das in rust gescheit
ok komm wir gehen mal und wir gehen mal gemini die chance jetzt was zu zu sagen
ich will eine message schicken vom background task in den websocket händler
wie eine event message schicken vom background task in den websocket händler und ja wie
würde ich das am besten machen
Mal gucken, ob ihr überhaupt versteht.
Der beste Weg, um Daten zwischen einem Hintergrundtask und Websocket-Händlern in Axiom zu verteilen, ist die Verwendung von Broadcast-Channels.
Das klingt gut. Das ist ja sowas in der Richtung, was ich hier gerade versucht habe zu beschreiben mit Event Publish und so.
Ein Broadcast-Channel erlaubt es einem Sender.
Du hast nirgendswo ein Pro-Abo. Nein.
Ich habe kein Abo. Also kein Abo, was AI-Sachen angeht.
Ein Broadcast-Channel erlaubt es einem Sender, Nachrichten an viele Empfänger gleichzeitig zu schicken.
Die Umsetzung...
Das klingt eigentlich ganz gut, oder?
Füge einen Broadcast-Sender zum State hinzu?
Aha!
Ja, das klingt nicht schlecht.
Mal gucken, ob das so funktioniert,
was da gebaut hat.
Also.
In mein App-State.
Broadcast-Sender.
Import.
Wozu gehört das?
Tokio.
Ja gut, klar.
Broadcast-Sender.
Nennen wir es mal hier Event-Bus oder sowas.
broadcast sender app state ach jetzt muss ich das hier natürlich initialisieren mit
ja, mit wie denn überhaupt?
Ah, so.
Ah.
Jetzt verstehe ich das.
Also im Endeffekt
sag ich jetzt
Channel Capacity 1 reicht.
Ich will ja nur eine Nachricht
da irgendwie in der Queue haben.
Und jetzt würde ich hier sagen,
TX.
Ah ja.
TRX braucht man nicht.
Ah ja, okay.
Ich glaube, jetzt habe ich es gecheckt.
Jetzt haben wir hier so eine Art
Event-Bus, wo ich was
drüber schicken kann.
So.
Wie kriege ich denn das jetzt gescheit
in meinen
Websocket-Händler rein?
das geht über das habe ich nämlich auch schon mal ausprobiert ich glaube ich weiß es noch da
musste man hier nämlich sagen ich will den state mit übergeben hier mit west state gab es hier so
was hier mit state und da will ich mein app state übergeben wieder den reference counter 1 hoch
zählen da ist funst so und wenn ich das jetzt noch richtig im kopf habe dann konnten wir jetzt
jetzt hier sagen state wie ging das jetzt noch mal ab state einfach so war
es das nee und er ganz ehrlich teilweise sind die rast dinger auf den
ersten blick genauso unleserlich wie die c++ fehlermeldung mit dem unterschied
dass er den rast fehlermeldung tatsächlich dann auch was sinnvolles
drin steht. In C++
ist es einfach nur so, scheiß dir den Bildschirm
voll mit Fehlermeldungen. Find mal selbst
raus, was Sache ist. Die Rust-
Fehlermeldungen sind dann, da steht zumindest was drin.
Ja, hier, guck. Unsatisfied
Trade Bound.
Okay, so genau check ich aber trotzdem
nicht, was er von mir will.
Also, ich vermute mal einfach, das stimmt nicht, was
ich hier als Parameter angegeben habe. Ah, ich weiß,
woran es liegt. So.
Die, musste man die Sachen ja
immer nochmal Kapseln extra, ne?
Dass das... Ja, genau so war das.
Hier, Axum.
Ah, guck jetzt, funzt es auch.
So, und das
packen wir jetzt
hier rein.
Übergeben wir das.
Ah,
jetzt ist das gut. So, jetzt habe ich hier
mein App-State. Und wie gucke ich
jetzt? Also, weil
wir hier...
das hat die ei gesagt dass ich das will ich das überhaupt weiß ich nicht da muss ich mal die muss
mal kurz tokio broadcast mal kurz die doku von lesen was da drin steht wie das funst also tokio
receive receive awaits aha also das heißt ich musste ich muss jetzt quasi so was machen wir
hier letztes jahre gleich state event pass ab und dann einfach arbeiten
einfach okay da machen wir jetzt mal eine loop da machen wir jetzt so was hier weil
Weil.
Weiß nicht, ob das die beste Variante ist, das zu machen.
Weil.
Wie war denn jetzt diese Syntax nochmal?
Irgendwie so, ne?
Let.
Message.
Gleich.
Okay.
Irgendwie so ging das doch.
Okay.
Receiver.
Und dann, was war das?
Rek.
Rek.
Rek.
Await.
Okay, zuerst.
Jim, ich fand es doch nicht.
Oh, das muss Mutt.
Mutt muss das sein.
Trotzdem falsch.
Type Annotation needed.
Ah.
Moment.
Moment, Moment, Moment.
Ich weiß wie.
Ich weiß wie.
Hier so muss das, ne?
So und dann so.
Ne.
Ah, hier ist noch eine Klammer.
so ne, ja
so, jetzt haben wir hier
jetzt guckt er quasi permanent
nach, ob es hier eine neue
also es stimmt nicht, dass er permanent nachguckt
der wartet hier an der Stelle
bis eine neue Message kommt
und dann geht er
im Schleifendurchlauf rein und dann
wartet er danach wieder, also es ist nicht, dass er hier
idle oder busy waited
im Kreis
so, und das da
Das da kommt jetzt komplett weg.
Kann man bei dir gucken, wie du Arch gebaut hast?
Ja, es gibt auf GitHub.
Gibt es paar .files von mir, die sind nicht so top aktuell, aber viel hat es ja nicht
getan.
Das ist Arch mit i3 WM.
Das ist kein Wayland Setup.
Gleich dazu sagen.
doch noch nichts
so und wenn man das jetzt richtig gemacht haben dann können wir jetzt hier
message übergeben warum was hat er
was will er von mir
Okay, ich bekomme ich habe was gelernt in to okay von
Into castet in den typ der hier von der funktion gebraucht wird wenn wenn möglich
Warum machst du nicht die gesponserten sachen in form
noch nicht weiter daran gedacht habe das jetzt zu machen was schon recht
Hat keinen tieferen sinn warum das noch da ist war es auch sogar
ist keine absicht also nicht habe ich will das unbedingt haben und jetzt
verschicken wir hier einmal pro sekunde eine message und wie sendet man dann
jetzt hier überhaupt state event bus send
wir sind mal in random in random value in tue es sind man und random value was
will er dann von mir hier an used result
Bäm
Mir doch egal so wie macht man ein random random value in rust
Rust random int
Generate random values
Use rand
Okay, ja, gut
Das sieht ja im Vergleich zu C++
viel einfacher aus
In C++ musst du ja mittlerweile
Riesen-Zeremonie machen, um Random-Nummern zu generieren
Ach, Moment
Das ist nicht in der Standard-Library
Sehe ich das richtig?
Es gibt in der Standard-Library keinen Random-Generator
Boah, das kann ich mir gar nicht vorstellen
Rust
Standard-Random
Doch, gibt es
wie jetzt ach ist unstable aber wird mich jetzt nicht jucken dass das unstable ist
aber wurscht nightly nightly only wir haben doch wir haben doch nightly builds wobei haben wir
nightly builds ich bin mir gerade selbst nicht so ganz sicher wie guckt man das rust minus minus
version oder so aus zehn minus wurscht ja guck mal ich habe doch meidli also
habe ich das doch
renner mit ist doch anstelle der standard das klingt schon abgedreht
das ist eines der ersten sachen die man normalerweise standort hat okay dann
dann gucken wir mal jetzt habe ich verpasst standard wo hatte ich denn hier std random rust
okay schauen wir mal wie das wie das funktioniert also ups scd random
einfach so
was will es von mir
moment okay das wäre das wert zu einfach
das war deutlich zu einfach wenn es einfach so funktionieren würde dass man sagt random random
oder muss man einfach hier sagen random default random source
ok ich bin so low iq das zu checken
How to use standard random rust?
Das weiß keiner anscheinend.
Okay.
AI-Modus.
I use lightly rust.
Aha.
Enable the feature.
das muss man da rein ist das kompliziert
das okay jetzt gucken wir mal ob das ob das funst ich glaube nicht dass ich das
benutzen will aber wo muss das hinschreiben hier oben in meinen fall
oder was feature random
Ah, jetzt, ne, scheiße.
Aber.
Muss ich hier irgendwie sagen?
Lob.
Keine Ahnung. U32.
Gleich.
Ich habe keine Ahnung, was das von mir will.
Äh.
Moment, was?
Nicht wirklich Punkt, Punkt, Punkt rein, oder?
Was?
Was ist das?
Punkt, Punkt, Punkt.
Ich habe gedacht, das ist ein Exempel.
Da muss Punkt, Punkt, Punkt rein.
Ja, was ist das denn schon wieder?
Also Raster geht es einem nicht aus mit komischer Syntax immer.
Aha.
War immer eine doofe Frage, warum gibt es nicht sowas wie Random Int oder so.
Nee, okay, komm Leute, wisst ihr was?
Scheiß auf dieses Feature.
Wir machen das mit dem Crate, das haben wir eh schon hinzugefügt.
Rust Random It.
Ach, das ist eine Range.
Ach so, ach so, ach so, ach so.
Also das heißt, ich könnte jetzt angeben, ich will einen Int von 1 bis 90 haben.
Nee.
Oh, wenn ich jetzt hier weg mache, dann...
Ne, das wäre in der Tat zu einfach.
Das wäre zu einfach.
Okay.
Das habe ich nicht gecheckt.
Egal, wir benutzen das Random Crate.
Zu blöd für.
So, dann.
So machen wir das jetzt hier.
Random.
Ich glaube, das ist besser.
Random.
Hier, den erstellen wir vor der Schleife.
RNG Random.
Import.
Random Number.
Ja, perfekt.
Guck mal, es kann so einfach sein von der Benutzung her.
Kann so einfach sein.
Jetzt übergeben wir hier Random.
string kann man machen mit einem in rost genau so und jetzt werden
eine random nummer alle sekunde und wir so
warum genau macht das hier oben
das hier unten jetzt kaputt
Okay.
Sollen wir ja keiner hier vorwerfen.
Wir benutzen nicht alle möglichen Tools.
Jetzt ist Chat-GPT dran.
Completely obvious.
Ja.
Wir können auch Perplexity noch mal
fragen.
Aber wir fragen beide mal.
Ah, yes. Okay.
You are hitting a classic, classic.
Natürlich. Was sonst?
You are hitting a classic
Tokyo Spawn Nonsense Future
issue kompilers akon very specific future return pack run up that is not send because
rand rent röntgen jesus and rng that is not send and it is heil der rast rast keck wait
aller was let's break it down and then fix it cleanly kommt ist obvius ich bin einfach nur
zu dumm chat das ist doch ist doch klar wie kloßbrühe was da los ist was going on was
going on tokyo spawn require send tokyo spawn may move the future between threats so everything
captured across points must be sent soll man diesen satz verstehen das requires background
Impel, Future, Send und Stand.
Was? Alter!
Was will es von mir?
RNG is not send.
Ja, wenn RNG not send ist,
Chat, da kann man nichts machen.
RNG is not send.
So logisch.
Ich weiß gar nicht,
wie man das nicht wissen kann.
RNG returns a threat local RNG,
which internally uses
RC unsafe cell.
Das bedeutet, Threat-Archie ist nicht gesendet.
Du hältst es lebendig über diese Warte.
Also ist die Zukunft nicht mehr gesendet.
Okay, was sollen wir dann machen, um das Ganze zu fixen?
Fix Option best to worst.
Don't hold the RNG across a weight.
Was?
Was?
Ich er...
Was?
Hä?
Wo ist denn jetzt der Unterschied zu meinem?
Da ist doch überhaupt kein Unterschied.
Da ist doch über...
Achso, weil ich das hier erst...
Aber das wird hier gar nicht erstellt.
Guck mal, der benutzt einfach nur Rant.
Ach, Moment. Warte mal.
Der benutzt das hier gar nicht.
Der sagt einfach Rant.
Random.
Moment, das geht auch?
Obviously geht das jetzt.
Und wir kriegen einen random Wert geschickt alle Sekunde.
Ich hab nicht verstanden was das Problem ist, Leute.
Easy.
explicit control okay man soll diesen kram in der loop erstellt ich glaube ich weiß was mir
das sagen will ich glaube jetzt habe ich es kapiert ich versuche das mal zu erklären da
könnt ihr mir sagen ob das sinn macht also ich hatte ich hatte das ich hatte das ja eben so
so dieses ding hier ist außerhalb von der schleife das heißt wenn das auf das
await trifft in der schleife dann exit das aus der funktion raus und wartet bis es fertig ist
und dann wird es wieder reiten dann wechselt wieder rein so und weil das hier raus exitet
aus der Funktion
ist, ähm,
kann das
hier aus dem Scope, nee, oder?
Kann's eigentlich nicht.
Oder doch, dann ist das aus dem Scope
raus, wird,
wird, ähm,
gelöscht, aber
sobald das Await fertig ist, springt er hier
wieder rein, macht einen neuen Durchgang,
würde versuchen, hier auf Tropf was
zuzugreifen, was vielleicht schon gelöscht
ist.
Irgendwie sowas in der Richtung ist das
Das ist aber trotzdem extrem
Pfeifert
Warum es jetzt natürlich so funktioniert
Der Aufruf ist mir sogar viel lieber so
Dann brauche ich weniger Krempel
Also es ist viel besser
Und so funktioniert das auch
Guck hier gibt es
Einmal pro Sekunde einen Random Wert
zurück.
Ich glaube, jetzt habe ich es halbwegs
gecheckt.
Und Send ist quasi
der Rust
Fachjargon
dafür, dass was Threadsafe
ist, oder wie?
Wenn was Send ist?
Ist Send, ist das...
Okay, was auch immer Send genau ist.
Es ist ein Trade, ja, und das sagt was?
alternative use a cent rng ach der ist okay der standard rng vom entropy der ist natürlich send
logisch so schauen wir mal was perplexity dazu gesagt hat perplexity hat keinen bock das ist
gleich schon mal abgekackt das hat sich gedacht mit dem scheiß setze ich mich nicht auseinander
rastover flow
ok
der kaufmann creating in non cent auch im text die schreibt die gleichen kämpfe
wie würde wie würden sie es denn fixen fix using threat rng
rng sollen wir verwenden
und okay es gibt jetzt einmal pro sekunde ein random int das funst aber schon mal ganz gut
das finde ich nicht schlecht so das kann man so lassen
das war ein paar plexige nicht gehen
so okay ja dann führst du das jetzt gut dann machen wir weiter man ist in rust hat man halt
nach eineinhalb stunden nur drei zeilen programmiert aber immerhin ist es dann safe
also was war jetzt als nächstes wie war jetzt weiter websocket stells haben war
message message q oder message event event umschickt gedöns hammer auch da haben wir
das denke ich mal zeit aber schon eine index html reinpappen weiß ich nicht schon in der
html reinpacken eigentlich ja doch wir gucken uns mal an wie das wie das funst
ja da kann man nichts dafür was in irgendwelchen crates passiert ich habe noch eine idee was wir
noch machen.
Und zwar,
das muss ich mir hier rauskopieren.
Das habe ich nämlich gestern gemacht.
Und zwar, guckt mal.
Wir können jetzt
Ich habe gestern hier sowas noch gebaut.
Und zwar
Mindestlevel
vom Loggen.
Also sprich, wenn in der
Config-Verbis gesetzt ist,
dann stellt er auf Debug und ansonsten stellt er auf Info. Das brauchen wir jetzt natürlich hier drinnen noch.
Champ, Verbose.
Wie macht man das jetzt bei einem Bool?
Wie macht man ein Default-Value bei einem Bool?
Wenn ich sage, ich will, dass es default
kann man
da so sagen?
Falls?
Gucken wir mal.
Okay, Funst.
Dann scheint das wohl richtig zu sein.
Ich habe hier einen Struct Request.
Ach, das ist noch von der
von der AI.
Das kommt weg.
Und jetzt müssen wir das noch setzen.
Hier, da können wir das nämlich wegmachen.
Tracing, AppState kann auch weg.
So, das copy-paste ich mir jetzt, weil ich das aus dem Kopfnummer zusammen kriege.
Das kriege ich aus dem Kopfnummer zusammen.
auch nur zwei zeilen und zwar das hier mich gestern gebastelt und zwar der baut jetzt ein
blogger zusammen der im jason format lockt und hier mein debug level nimmt also sprich wenn
verbot gesetzt ist lockt er auch die back und ansonsten lockt der info sondern das
funzt jetzt nicht import wahrscheinlich das hier mit filter import in it im
promos alles importieren und sich blazing fast ritten in rust so und jetzt
funzt das und jetzt sollte der theoretisch moment das wichtigste habe
ich ja noch vergessen man kann nämlich auch http sachen loggen lassen indem man
das hier noch dabei schreibt trace layer ok trace layer gibt es nicht mehr
da habe ich bestimmt irgendwas nicht hinzugefügt lassen wir mal kurz gucken
was ich da gebaut habe cargo tommel
das da muss man hinzufügen
hat ja du hast recht tower http muss man hinzufügen
genau das hat meine idee gesagt dass ich das machen muss
dann gibt es das und nun kann man import genau so und jetzt wenn ich jetzt alles richtig gemacht
habe wir machen hier unten mal watch wir können hier unten mal jetzt sieht man ist einfach nur
info passiert nichts und wenn ich jetzt sage export champ verbose oder oder noch besser ich
kann einfach verbose als argument hinten dran hängen. guck jetzt hat er debug logs und
loggt auch jeden request der reinkommt. eigentlich ziemlich nice gelöst. zwar ein
bisschen magic hier mit diesem layer und sonst was aber eigentlich ganz cool.
wenn man es wieder weg macht hat er keine debug logs mehr. dann haut er einfach ganz
normal info in voraus ist dieses ich logge einmal pro sekunde ist auch
ziemlicher blödsinn das machen wir mal wieder weg weil ich will eigentlich
gar nichts einmal pro sekunde loggen okay gut hätten wir das auch soweit
So, was habe ich gesagt, was wir jetzt machen wollen?
Index-HTML embedden oder irgendwas in der Sturm?
Ich habe es schon wieder verdrängt.
Background-Update.
Weg.
Moin, Tom.
Da bist du!
Hi.
Ich habe vorhin irgendwas...
Habe ich an dich gedacht, dass du...
Genau, weil du hast dich doch beschwert, das letzte Mal,
dass du keine globalen Variablen in Rust haben willst.
Oder das sagt, weil man globale Variablen in Rust verwendet.
Kannst dich noch dran erinnern?
Ich habe das jetzt umgebaut.
Wir verwenden jetzt keine globalen Variablen mehr.
Guck, wir injecten jetzt AppState überall.
Und auch hier in Baaxum wird das injected.
Das Ganze packen wir übrigens noch, wo wir gerade dabei sind.
Das packen wir noch in eine eigene Datei, die StateRS heißt.
wir verschieben das und wir verschieben das da rein.
Refactor
at
Refactored.
Dann ist das Ganze auch wieder
ein bisschen besser lesbar.
So. Excellent.
Ist das. Excellent.
Ja.
Was kommt denn jetzt noch?
Was braucht man jetzt noch? Per Web-Song?
Ne, wir gucken jetzt, wie man den Index HTML
Embedded. Das interessiert mich.
Noch was anderes, wo wir gerade
dabei sind. Wir...
Hab ich eine Build-AS? Ne, Build... Ah,
Build-AS, ne.
Moment, Moment, Moment.
Config... Ne,
Cargo-Config.
Ich wollte da noch mal
kompilieren mit statischem,
statisches Binary.
Genau. Cargo...
Cargo-Build.
Minus Minus Release Target das hier da kommt ein statisches Binary bei raus.
Ich würde mal gucken wie groß das statische Binary jetzt ist.
Weil jetzt haben wir ja schon ein paar Sachen hier eingebaut.
Was schätzt ihr? Was schätzt ihr wie groß ist die auf Windows Sprache zu sagen Echse?
Also ich sag 4 MB ist das Binary.
137 das keine elektron anwendung oder zu über 80 also da kann ich dir sagen es ist
definitiv kleiner als 187 ok schauen wir mal target x86 aus es ist 3,4 mb aber aber wir
können das noch strippen
und jetzt ist es 2,5 MB. Rust Champ, bam läuft, Funst. Komplett statisches Binary.
Bytes, ja klar. 2,5 MB ist das, das geht voll klar finde ich.
Excellent!
Dann gucken wir mal, wie wir das machen.
Wir probieren nochmals.
Ich habe doch hier letztens
Bacon oder wie das hieß.
Moment, das klopft an der Tür.
Okay.
Da.
das soll letztens hier irgendwie gestartet mit dass er im hintergrund immer reloadet
wenn man was ändert in der anwendung das war doch eigentlich ganz nice
ja habe ich doch was
hier habe ich doch machen wir mal jetzt so was wie keine ahnung
run.sh set paste
aber das habe ich jetzt auch mal ausprobiert das hat ganz gut funktioniert
jetzt reloadet er nämlich immer im hintergrund meinen
meinen kompletten web server wenn ich das hier ändere also sagen wir mal ich
sage jetzt hier wir wollen jetzt blub reloaded mal gucken wie gut das funktioniert okay 123 123
zack beim 1 reloaded das jetzt automatisch mit das ist kein hot reload mit module replacement
oder sowas wie in javascript aber es ist praktisch als besser als immer cargo run von hand zu machen
ja ich habe ein paar demos geguckt was videos von demos auf youtube mit shooter
shooter mit einem kompletten level in keine ahnung 60k oder irgendwie sowas
also gibt es ganz abgedrehtes zeug
so machen wir weiter wie im bett man jetzt eine index html wenn ich mich
recht erinnert es gibt hier rast mbm bett gab es da hier rast mb genau so wie
funs das also erstmal nehmen wir das hinzufügen gucken erstmal ob das
documentation
Nice!
Keine Examples.
Fuck!
Was ist denn das?
Repos?
Alter, wo sind wir denn hier?
Wo ist denn der
Source Code?
Was sehe ich auf
ShitHub?
aber beliebt beliebt ist das kreis doch ja kann man durchaus kann man durchaus so sagen
wo ist denn der source code von dem kreis
hier komm jetzt
two weeks ago zur eigenen repo stelle es gehostet na gut also da kommt man
hier rast embedded 8.9 und dann sagt man was in die bank entweder
in release of an debug embed feature ist in nebel
the folder path ist resolved relativ to work ago tommel ist
solange nur eine reihe braucht benutzt einfach die include str makro ist ist
das ist das in rast eingebauter include
includes utf-8 encoded file es ist ja easy easy
der fall ist okay relativ zu kohlenfall similar to modules erfahrung ja dann
brauche ich doch diesen kram hier gar nicht wie sie nur einen fall haben ja
okay probieren wir das aus das müssen wir jetzt hier im händler machen
include includes drill index html in tucuma da weiß sogar schon was ich
machen will led html ok so geht es schon mal nett
Kundenread Source Index HTML. Kann man da auch eins hoch gehen vielleicht?
Nee.
Wird das in Clued dann in die Binary kopiert? Ja, also hoffe ich, hoffe ich.
Also ich meine, ich hätte gerne... Warum gibt es hier zwei... Warum gibt es zwei New-
Knöpfe? JetBrains, was ist da los?
html-file index html
weight
jetzt hat das gecheckt
string okay das ist aber easy so was ich jetzt gerne machen würde ist wir kopieren das mal hier
oben hin oder auch nicht jetzt findet das nicht oder doch ach das geht das geht auch okay er ist
doch nicht so blöd. Der hat's kapiert.
Also, weil ich würde
gerne, ehrlich gesagt, nämlich hier ein Verzeichnis
machen. Directory.
So irgendwie, keine Ahnung, Web-App oder so.
Das da
reinschieben.
Und dann sagen... Ach, oh!
Guck mal, wie schlau die IDE
ist, Alter! Habt ihr das gesehen?
Der hat hier den
String-Fad angepasst.
Ja, das ist
High-IQ-IDE.
Unterstützung. Das ist ziemlich
pock.
Das ist wirklich nice.
Da kann man nichts sagen.
Jetzt hier.
HTML.
Geht nicht. Warum?
Ah, expected str.
Ne, Moment.
Ich kann das...
To str kann ich mir
sparen.
Das ist doch schon ein Strill.
Ja, genau.
Okay, heißt im Endeffekt,
wenn ich jetzt...
Guck mal, hat schon funktioniert.
Hat sich auch automatisch reloaded.
Guck.
So, localhost.
Port 8080.
Zack.
Can't wait.
Da sind wir.
Easy.
Easy.
Easy as fuck.
Easy.
Die Binary ist jetzt größer.
Ja, das stimmt.
Aber ich meine, die Index-HTML, so groß wird das jetzt ja nicht sein.
Ein paar Bytes.
Das ist gut.
Das finde ich so ein Zügig.
Also es hat auch seine Vorzüge.
Gefällt mir.
Gefällt mir.
So, weiter geht's.
Dann würde ich sagen, implementieren wir mal ein paar Sachen, die wir brauchen. Ich baue ja die gleiche Anwendung, die ich schon in Go gebaut habe, in Quarkus, in Bootstrap, in C-Sharp und so meine übliche Testanwendung. Also quasi ein Web-Server, der über Web-Server Sachen verschickt und per Prometheus ein paar Metriken bereitstellt.
unter anderem paar infos über den prozess und wie großen verzeichnis ist das ist eigentlich
ein ziemlich gutes beispiel anwendung weil man also von allem ein bisschen was braucht
ein bisschen web entwicklungs kram ein bisschen standard leib und die zeug sich angucken das ist
ist immer ganz gut rundum das heißt wir brauchen jetzt noch eine funktion die die mir infos über
prozesse gibt die laufen wie listet man in rust alle prozesse auf einmal google lässt
all oder wie listet man in was für eine anwendung geht's um die hier um den rust champ
warst du nicht auch dabei wo wir die anwendung wo wir eine anwendung in quarkus gebaut haben
das ist die gleiche anwendung nur in rust
Ansonsten, das...
Erinnert es sich? Okay.
Letztendlich ist es eine Web-Anwendung,
die per Websocket
random Zeug an den Client schickt
und
per Prometheus ein paar Metriken
bereitstellt. Fertig.
Das ist rein zum Üben.
Das soll am Ende dann auch nichts großartig machen.
Wie lässt man in Rust
alle laufenden Prozesse auf unter Linux.
Unter Linux.
Ergebnisse werden gesucht.
Proc.
Empfohlene Methode, das Sysinfo-Crate.
Okay.
Gibt es noch andere Crates?
ja es gibt das info und progfs noch weitere spezielle linux progfs heim
ob das brauche also haben wir hier crates aber einmal progfs und
sus wie ist das sus info
Sus info
ok sus info hat
recent
21 millionen download
Ne in der idee also ganz ehrlich dieses chat das verwende ich nicht ich habe mir das die letzten tage angeguckt es ist so grausam
sind analogs das ist sowas wie libraries ja rates sind quasi sowas wie gems in ruby
nuget packages in dotnet und modules weiß ich packages packages heißt glaube ich in go
oder npm packages in javascript libraries in c gibt es ja leider nicht in einem ordentlichen
Modulformat. Mittlerweile gibt es zwar in der Startlibrary oder seit C++23,
glaube ich, gibt es ja Modulsupport, aber das wird es mit absehbarer Zeit zu jeder durchsetzen.
So.
ja und in c und c++ ist es ja hauptsächlich wir kopieren header files an der stelle per makro
also wir haben sys info und wir haben procfs. procfs wird ja nur sechs millionen mal down
geloadet sondern gucken wir uns mal an was mir besser gefällt von der von der syntax her also
fahr mal an mit Procfs. Rust liable for reading Linux Procfs file system. Das ist das, Rust sieht manchmal so
so pepege aus. Processes, all processes, unwrap, stash, joa. Das sieht gut aus. Ich finde da blickt man
halbwegs durch. Process all processes und dann hier stash und dann kriegt man Zeugs raus. Joa, das sieht auch ganz gut aus.
wie sieht das ganze bei sysinfo aus?
Schauen wir mal kurz was mehr.
Ja, sysinfo hat deutlich mehr.
Gerne auch.
Example.
Sys, total memory, used memory.
Name.
Processes, process name, disk.
Das sieht doch noch besser aus.
Okay, dann.
Dann nehmen wir doch sysinfo.
dann nehmen wir noch sysinfo also ey das tab brauchen wir add sysinfo
dann gehen wir mal unsere main methode rein und machen das hier dass wir direkt beim starten sehen
dass was passiert also wie war das jetzt hier nochmal or pit in process process name ne ne ne
moment moment ach so ja okay das ist nicht verkehrt
waren wir doch mal hier das info
Wo kommt denn hier Süß her?
Wo kommt Süß her?
Hä?
Hä?
Süß, klar.
Ach hier!
Please remember that you need to update... you need to call again...
Okay.
Also, brauchen wir dann sowas hier.
This...
This is the new...
This...
Okay.
Äh...
Das hat nicht funktioniert.
Cargo run.
Das funktioniert nicht.
Es hat nicht funktioniert.
Gibt keine Prozesse aus.
Tja.
Das ist schon doof.
Ah, nee, Refresh müssen wir noch callen.
Ja, genau.
Da habe ich ganz vergessen.
Okay, schon besser.
Nice.
Exzellent.
Exzellent.
Ähm.
Wie?
Okay, Discusage juckt mich jetzt da ehrlich gesagt nicht so.
Was mich viel mehr juckt ist...
Stat.
Ich will Major Page Falls haben.
Das ist immer meine Testmetrik.
Gibt es nicht.
Status vielleicht?
Was? Was sagt Status?
Sleep. Aha.
Wie kriegt man?
Okay, da müssen wir jetzt...
Da fragen wir jetzt nochmal.
Mit dem SysInfo...
SysInfo...
Rate.
Ich überlege.
Im aktuellen gibt es keine direkte Methode namens MajorFaults im Prozessor, um die MajorFaults auszulegen.
Das Create, aha.
Wenn diese Sp...
Okay.
Leute, ProgFS.
Wäre ja auch zu schön gewesen,
wenn es direkt gefunden hätte.
Wir brauchen ProgFS.
Dann machen wir das Ganze mal wieder rückgängig, würde ich sagen.
Also.
ProgFS brauchen wir.
mit welcher Versionsnummer eigentlich?
Procfs. Ja, das wäre gut, wenn das so heißen würde.
Procfs.
Hier hatten wir noch ein Example.
For proc in processes.
Procfs.
Okay, jetzt muss ich mal kurz in mich gehen.
Wir machen mal eine eigene Datei.
wir machen mal eine Datei.
Ach komm, weißt drauf. Schreiben wir erstmal Inline,
dann verschieben wir es.
Ähm, wir machen mal
eine Funktion.
Fn
get
proc stats oder so.
Ähm,
so, okay, wie funzt das denn
jetzt hier mit dem, mit
procfs? Also procfs wahrscheinlich.
All,
Nee, Processes.
All Processes. So war das.
Ähm.
Rock Result.
Rock Eater. Was?
Was machen die hier?
Ach, das wird geunwrapped.
Nee, wir unwrappen das nicht, weil es könnte ja Probleme geben.
Ähm, dann sagen wir jetzt.
Jetzt, jetzt, jetzt, komm.
jetzt benutzen wir mal dieses dieses rust link benutzen wir jetzt dieses link wie
also das link ist schab so was um objekte zu filtern so was ähnliches gibt
es ja in rast auch moment moment moment moment moment ich habe eine idee jetzt
pfeiffer das programming leute post champ wir returnen hier jetzt einen ein result return
wir jetzt ein result ja ich glaube dass das stimmt soweit auch so jetzt return wir ein
result da können wir nämlich ein fragezeichen hin machen eckel rast syntax
hier unten sagen wir mal ok
ok ohne
ah ja ok funzt also jetzt folgendermaßen wenn das hier einen error schmeißt dann
returnt die funktion hier mit dem error ansonsten geht es weiter
get proc stats so heißt das
dann nennen wir das jetzt hier auch mal dass wir jetzt hinzufügen okay weiter so also das
heißt da haben jetzt erledigt prozess ist auf jeden fall konnte abrufen dann sagen wir jetzt
map
das proxys hat das in rissal okay da mal was anderes dann sagen wir hilter map und
jetzt nur alle prozesse die ein fehler haben beim auslesen und jetzt sagen wir
war. Map. Jetzt haben wir alle Prozesse, die keinen Fehler haben. Map. Was ist das jetzt?
Jetzt ist es ein Process. Okay. Jetzt haben wir da auch sowas wie Pit und sowas drin.
Das ist gut. Und jetzt brauchen wir hier Memory. Mem. Brauchen wir Mem? Ne, warte mal. Wir
haben doch hier ein Beispiel gehabt in. Ich Depp hab schon wieder zugemacht, hä? Bei
google statt obstett brauchen war der status der stadt also in der in der
man page heißt das prozess stadt und da kommt jetzt was zurück
da kommt okay das heißt das müssen wir jetzt noch mal filter okay dann machen
wir noch mal das gleiche noch mal filter map wenn es denn okay ist
vorrast sollte jetzt nicht eigentlich die zeile war so langsam umbrechen
machte so filter map soll jetzt gucken wir noch mal mit dem filter gucken ob
der prozess den richtigen namen hat da machen wir jetzt hardcoded irgendwas rein also sagen
als p.name.
Keine Ahnung.
Was haben wir denn hier zu bieten?
State?
Ne.
Blocked.
Arc.
Om.
FileName.
Ja.
Ich würde sagen, komm.
Komm gleich, Bash.
So.
Okay.
Jetzt ist die große Preisfrage.
Wie mache ich daraus jetzt einen Vektor?
Weil eigentlich will ich ja
einen Vektor
von Stat
returnen.
Kommt Video zu Silvester?
Keine Ahnung, weiß ich nicht.
Also.
Wir wollen sowas wie
To, Into,
Collect Into.
Will ich das haben?
Äh, ne.
Collect?
Was, Collect?
So?
Ah ja.
Stats.
Okay.
Das Pfunst.
Boah, noch cloned.
Warum?
Monkess.
vorher so als funktioniert das lasst was hat er nicht verautet so jetzt kriegen wir hier alle
es kriegen wir nur die salz zurück wir können jetzt wo wir gerade schon dabei sind wir gehen
da mal durch stats vor und geben das einfach mal aus ich will ja nur gucken ob es prinzipiell
funktioniert.
Rindlein.
Äh, komm. Zum Beispiel, ja.
Ach nee, das muss man ja
so machen.
Guck mal.
Ups.
Was jetzt das Problem?
Ah,
Susinfo ist noch drin.
Bash. Jawoll, Funs.
Sehr gut.
Aber Tommy anscheinend hat er das selbst geklont, oder?
Kann das sein, dass Stead quasi klont oder wie das heißt, implementiert und das automatisch passiert?
Oder Copy, oder Copy.
Irgendwie so, ja.
Das Funs finde ich gut.
Dann machen wir doch jetzt mal folgendes.
Wir schnappen uns das hier.
Und verschieben das mal in eine eigene Datei.
Refactor.
Extract method.
Nee, nee, Quatsch.
Nicht Extract method.
WTF.
Äh, Refactor.
hier das heißt jetzt process scanner also so wie den kam auch bei in java
genannt haben da kriegt es auch ein pub davor und wenn ich das jetzt richtig
verstanden habe dann kann ich jetzt sagen an der stelle process scanner
warum hat doch browser scanner geld proxys genau so das machen wir jetzt hier
im background beckhorns red arbeitsprozess genau hier
stets ein sehr handlicher result type result weg stadt box dünn
jetzt will ich checken wie man ok ok jetzt will ich jetzt will ich ausprobieren
wenn das ein Fehler gab,
dann mach ich
nix. Okay,
Match muss man jetzt machen.
Match.
Ne.
Match.
So. Das ist jetzt
Magic Rust Syntax.
So.
Wenn das ohne
Fehler ging, dann
Stats.
Okay.
Und wenn es einen Fehler gab, dann loggen wir den einfach.
Wenn es einen Fehler gab, dann sagen wir hier Error.
Bracing.
Warning.
Ah, irgendwie so.
Oder kann man das anders machen?
Kann man den Error direkt printen?
Ja.
Machen wir das einfach so raus.
so gut ist und stets hier dann schicken wir das jetzt mal einfach über den message pass
alle alle dateien alle alle prozess namen die wir gefunden haben send message pass
nicht random number sondern wir sagen jetzt hier stats schleife trübe
dachte der ist so schlau und checkt das hallo
chat brains keck wait so jetzt schicken wir über websocket
schicken wir jetzt den namen von den gefundenen prozessen rüber heißt im
Elementeffekt. Wir sollten jetzt hier unten gleich
Websocket.
Ja.
Legofunden und Prozesse.
Okay.
Wir starten nochmal eine zweite Bash.
Jetzt müsste er mehr schicken.
Oh.
Wo ist jetzt das Problem?
Was ist das Problem?
Das verstehe ich jetzt nicht.
Weil ich meine, der sendet halt dann mehrere Sachen.
Wo ist das Problem?
Du hast falsch gefiltert.
Ja, aber trotzdem.
Musst du nicht den Prozessnamen filtern?
Nicht kommen im...
Das ist der Fallname, ist das.
Aber warum kackt denn das jetzt hier ab?
Das verstehe ich nicht.
Ah, kann das sein?
Kann das sein, weil...
Weil die...
Die Queue voll ist?
Broadcast?
aber da müsste es noch eine fehlermeldung geben oder netz
capacity war 16
jetzt funzt das liegt daran weil die queue voll ist mit messages
Aber dann hätte ich jetzt mal
Anstatt abzukacken
Naja, wobei
Wobei, haha
Wir sind selbst dran schuld
Guck mal, wir machen hier unten
Keinerlei, keinerlei
Errorhandling, wir sagen einfach nur
Du filterst doch immer noch
Auf Bash, ja, ist doch richtig
Bash läuft ja auch zweimal
Deswegen gibt es zwei
Gibt es immer zwei pro Ausgabe, guck
22 wenn ich und wenn ich ein dritter best starte dann gibt es drei best
pro ausgabe machen als nach dem weil das geht dass man so sagen kann
Ich glaube, das funzt nicht.
An der Stelle.
Stimmt, du hast recht.
Wir geben jetzt einfach mal hier aus,
dass man es besser sieht.
genau du hast recht wir geben jetzt hier aus moment
wir geben jetzt hier aus format text gleich message gleich format gehen wir hier aus genau
so und da geben wir jetzt hier aus stadt kommt es der stadt kommen jetzt aus so und
Okay.
Wollen wir neu starten?
Huch.
Jetzt habe ich es ganz kaputt gemacht.
Jetzt ist es ganz broken.
Warum ist es denn jetzt komplett kaputt?
Ach, Capacity immer noch eins.
Guck hier, Pit.
Genau, wenn ich jetzt noch ein paar Bashes, weitere Bash starte, dann seht ihr, gibt es immer mehr Ausgabe.
Ich weiß, warum das hier, warum das keine, ich mach gerade nochmal eins rein.
Dann wissen wir, dass es abkackt.
Ich weiß, woran das liegt, dass er keine Fehler gibt.
Guck mal, wir sagen hier nämlich immer nur Violet.
Okay.
Wir müssen eigentlich gucken.
Im Errorfall.
Also eigentlich
müssten wir so machen wahrscheinlich.
Loop.
Jetzt gucken wir hier.
Match.
Vaining Patterns.
Okay.
Wenn es okay ist,
passiert das hier?
Message.
Und da machen wir auch nicht
Unwrap, sondern wir machen einfach
gar nichts, weil es mir ziemlich
wurscht ist, ehrlich gesagt, ob das...
Ah, nee, das sollten wir
vielleicht noch handeln. Das sollten wir noch handeln.
Aber wenn es ein Error ist, dann müssen wir
sagen, Tracing,
Warning und dann hier,
gib den Error aus.
das geht nicht okay aber ich kann bestimmt sagen er gleich
oder display aber so so jetzt gibt er hier den error aus das heißt wenn ich
jetzt noch mal mache dann sollte er auch ein fehler ausgeben
guck jetzt sagt der channel lag bei 1 warning der overflow quasi jetzt der channel weil er
passt nicht mehr passt nicht mehr genug rein jetzt handeln wir auch den error und deswegen
läuft wahrscheinlich auch die schlacht die schleife bricht ab weil was man nicht okay
war.
Dann ist es sogar noch besser, wie wir es jetzt hier machen.
Und jetzt sollten wir hier noch gucken,
das ist das Letzte, was wir heute noch machen können.
Jetzt sollten wir noch hier noch gucken.
Socket. Wir müssen nämlich irgendwie gucken,
was ist denn, wenn die Websocket-Verbindung
abbricht? Dann bleibt der ja für immer hier drinnen.
Wir brauchen hier noch irgendwie so eine
Art Cancel.
Aber wie cancelt man die? Also wie guckt
man denn, ob der
Websocket noch da ist?
Ach so, ah, wahrscheinlich hier
vom Send, der Return.
Was kommt da zurück?
Result. Ja, genau.
Also können wir hier nochmal
gucken. Aha.
Nochmal ein Match?
Nee.
Jetzt wird es aber langsam
jetzt wird es aber langsam eklig.
Bonker
Essel.
Das ist jetzt
schon eklig, oder?
Wobei, Moment, Moment, Moment, stimmt gar nicht.
Im OK-Fall wollen wir ja gar nichts machen.
Das brauchen wir gar nicht.
Im OK-Fall, wir wollen ja nur im Error-Fall was machen.
Genau, genau, da wollte ich auch drauf raus, dass wir irgendwie sowas machen hier.
If let Error...
Ne, Moment, ich mach das immer falsch rum.
Alter, was?
Fuck.
If let error...
Dann wollen wir ein Break machen.
Das war es eigentlich.
Break aus der Schleife und abkacken.
Also,
den, den, das hier schlägt.
Ja, so muss das jetzt funktionieren.
Fuck.
Genau, Channel lagged.
Alles gut. Jetzt erhöhen wir
mal
die
Capacity
auf 16 und dann klappt
wieder alles.
Ja, guck, kriegen wir beide.
Starten wir mal.
Starten wir ein paar Bashs.
Ja.
Kunst.
Excellent.
Excellent.
Fällt mir.
Das ist jetzt sogar ganz gut lesbar, aber teilweise ist Rust
wirklich echt undurchdringbar.
Da ist so eine Wand aus Zeichen vor dir.
Ich finde, oder was, Chat, was sagt ihr?
Wie gut lesbar ist das hier?
Ich finde, das ist so in einer Lesbarkeitsskala von 1 bis 10, würde ich sagen, eine 6.
6 von 10.
Es geht deutlich schlimmer, aber es geht auch viel schöner.
8 von 10?
Ich weiß nicht.
Näh.
Auf eine 7 von 10 lasse ich mich vielleicht noch rauf handeln.
Aber ich bleibe bei einer 6 von 10.
Ruby ist für mich 10 von 10.
Lesbarkeit.
Ruby.
Leider macht man in Ruby nichts mehr.
Du hast das Gefühl, in anderen Sprachen hättest du niemals diese Cases gehandelt.
Komm auf die Sprache.
Also ich gebe dir recht, an viele Sachen denkt man nicht.
Also du musst dich ja bei Rust rumkümmern, weil ansonsten meckert dich Rust an.
Das ist natürlich nicht schlecht.
Komm auf die Sprache an.
Also in Go wahrscheinlich schon.
Da ist es recht ähnlich.
Also da musst du dich ja auch explizit um Rückgabe, um Errorsachen kümmern.
Wobei du es auch in Go kannst du auch wie hier, hier unwraps du die ganze Zeit in Go
kannst du auch einfach Errors wegschmeißen.
Das geht auch, aber ist vielleicht nicht der Sinn.
In Go würde ich sagen, würde man die Errors doch handeln.
Ich habe aber den Eindruck, dass Rust Libraries und in Rust generell sehr viele Fehler durchgereicht
anstatt sie schon zu handeln.
Also es gibt zum Beispiel,
wenn du in Rust sagst,
path
new
slash keg w
null.txt
Ja, wenn du sowas hier hast,
dann denkt man sich jetzt,
okay, es gibt sowas wie ein path to string.
Gibt es aber nicht.
Es gibt nur ein to string
Option, wo du dann gucken musst,
hat das funktioniert? Da fragt man sich,
Wie kann es sein, dass ein Path nicht zu einem String umgewandt werden kann?
Und dann sagen die, ja, es könnte ja Pfade geben, die nicht in UTF-8 encoded werden können.
Deswegen muss das Option.
Und ich würde halt sagen, okay, in anderen Sprachen ist wahrscheinlich...
Also in Rust musst du dann sowas hier machen, Display.
string oder funs dann hast du dann irgendwelche platzhalter im string ich
würde sagen in den meisten anderen sprachen wäre das hier wahrscheinlich
der default
also du vergisst bestimmt viele cases in anderen sprachen um dich darum zu
kümmern das stimmt aber viele cases an darum andersrum würde ich sagen gibt es
da auch gar nicht zu händeln.
Gut, Chat.
Schön, dass ihr dabei wart.
Exzellent.
Ich gehe jetzt mal kurz an die frische Luft
und fahre mal aufs Klo.
Und dann sehen wir uns im nächsten
Stream. Dann machen wir, denke
ich nicht weiter mit rast was machen wir dann in einem der übernächsten streams weiter dann
wird es glaube ich war zeit für server da freut sich der f pro körper ja schon die ganze zeit drauf
falls er noch da ist ja
alles klar bis der leute macht's gut
